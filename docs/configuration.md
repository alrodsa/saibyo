# âš™ï¸ Saibyo Configuration Guide

Saibyo uses **Pydantic BaseSettings** to provide a clean and flexible configuration
system. All settings can be controlled using:

- Python parameters (through `SaibyoConf` instance).
- `.env` variables (if using the devcontainer).
- Environment variables.
- Default values defined in the code.

Every configuration block is automatically loaded when calling:

```python
from saibyo.conf.conf import SaibyoConf
from saibyo.base.conf.app import configure

conf = configure("saibyo", ROOT_DIR, SaibyoConf)
```

This ensures consistent behavior for the CLI, Python API, and internal components.

## ðŸ§© Configuration Structure Overview

Saibyoâ€™s configuration is made of four main components:

```text
SaibyoConf
â”‚
â”œâ”€â”€ interpolator (InterpolatorConf)
â”‚     â”œâ”€â”€ comparation: bool
â”‚     â”œâ”€â”€ lightweight: bool
â”‚     â””â”€â”€ exponential: int
â”‚
â””â”€â”€ comparator (ComparatorConf)
      â”œâ”€â”€ text (OverlayTextConf)
      â”‚     â”œâ”€â”€ overlay: bool
      â”‚     â””â”€â”€ position: str
      â”œâ”€â”€ background_color: str
      â””â”€â”€ mode: str
```

Each component can be customized using its own `SAIBYO_*` environment variables.

### ðŸŸ¦ 1. `InterpolatorConf`

Controls how Saibyo performs deep-learningâ€“based interpolation.

#### ðŸ“Œ Settings

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `comparation` | bool | `False` | Whether to generate an additional comparison video |
| `lightweight` | bool | `True` | Uses FP16 inference; improves speed, slightly lower precision |
| `exponential` | int | `2` | FPS multiplier exponent (multiplier = `2 ** exponential`) |

#### ðŸ§® Exponent explanation

The `exponential` field defines the FPS multiplier as a power of two as follows:

| exponential | multiplier | result |
|------------|------------|---------|
| `1` | `2` | double FPS |
| `2` | `4` | 4Ã— FPS |
| `3` | `8` | 8Ã— FPS |
| `4` | `16` | extreme slow-motion |

>For example, if your input video is `30 FPS` and you set `exponential = 3`, the output video will be `240 FPS` (`30 * 8`).

#### ðŸŒ± Environment variable prefix

The environment variable prefix for this configuration block is:

```bash
SAIBYO_INTERPOLATOR_
```

Examples:

```bash
export SAIBYO_INTERPOLATOR_EXPONENTIAL=3
export SAIBYO_INTERPOLATOR_LIGHTWEIGHT=False
```

### ðŸŸ© 2. `OverlayTextConf`

Controls text overlays in comparison videos generated by the `Comparator`.

#### ðŸ“Œ Settings

| Field | Type | Default | Description |
|-------|--------|---------|-------------|
| `overlay` | bool | `True` | Whether to draw overlay text with source/video info |
| `position` | str (`top_left`, `top_right`, `bottom_left`, `bottom_right`) | `"top_left"` | Overlay text location |

#### ðŸŒ± Environment variable prefix

The environment variable prefix for this configuration block is:

```bash
SAIBYO_COMPARATOR_OVERLAY_TEXT_
```

Examples:

```bash
export SAIBYO_COMPARATOR_OVERLAY_TEXT_OVERLAY=False
export SAIBYO_COMPARATOR_OVERLAY_TEXT_POSITION=bottom_right
```

### ðŸŸ¨ 3. `ComparatorConf`

Controls visual comparison output between two videos.

#### ðŸ“Œ Settings

| Field | Type | Default | Description |
|-------|--------|---------|-------------|
| `text` | OverlayTextConf | â€” | Nested overlay configuration |
| `background_color` | str | `"#000000"` | Background fill color |
| `mode` | str | `"side_by_side"` | Comparison layout |

#### ðŸ–¼ Supported Modes (`mode`)

The following comparison modes are available:

| Mode | Description |
|------|-------------|
| `side_by_side` | Left = A, Right = B |
| `top_bottom` | Top = A, Bottom = B |
| `split_half_vertical` | Vertical half split |
| `split_half_horizontal` | Horizontal half split |

> For more details on comparison modes, refer to the [Comparison Modes Guide](comparison-modes.md).

#### ðŸŒ± Environment variable prefix

The environment variable prefix for this configuration block is:

```bash
SAIBYO_COMPARATOR_
```

Examples:

```bash
export SAIBYO_COMPARATOR_MODE=top_bottom
export SAIBYO_COMPARATOR_BACKGROUND_COLOR="#ffffff"
```

---

### ðŸŸ¥ 4. `SaibyoConf`

Top-level configuration class that bundles all settings.

#### ðŸ“Œ Components

| Field | Type | Description |
|-------|------|-------------|
| `interpolator` | InterpolatorConf | Interpolation-related settings |
| `comparator` | ComparatorConf | Comparison-related settings |


## ðŸ§ª Using Configuration in Python

You can access and customize Saibyo's configuration programmatically in your Python scripts. Hereâ€™s a simple example:

```python
from saibyo.conf.conf import SaibyoConf

conf = SaibyoConf(
      interpolator=InterpolatorConf(
            exponential=3,
            lightweight=False,
      ),
      comparator=ComparatorConf(
            mode="top_bottom",
            background_color="#ffffff",
            text=OverlayTextConf(
                  overlay=True,
                  position="bottom_right",
            ),
      ),
)

print(conf.interpolator.exponential)
# 3
print(conf.comparator.mode)
# top_bottom
```

This will load the configuration with any overrides from environment variables or `.env` files, allowing you to customize Saibyo's behavior programmatically.
